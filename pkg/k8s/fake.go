package k8s

import (
	"k8s.io/client-go/rest"
	"k8s.io/client-go/rest/fake"
	"k8s.io/client-go/tools/clientcmd"

	"net/http"
)

func NewFakeClient(roundTripper func(*http.Request) (*http.Response, error), fns ...ReqTransformFn) (Interface, error) {
	return newClient(newFakeRestConfig(), fake.CreateHTTPClient(roundTripper), fns...)
}

func newFakeRestConfig() *rest.Config {
	clientConfig, _ := clientcmd.NewClientConfigFromBytes([]byte(kubeConfig))
	restConfig, _ := clientConfig.ClientConfig()
	return restConfig
}

const kubeConfig = `
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EVXhOakF6TVRnME1sb1hEVE15TURVeE16QXpNVGcwTWxvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTWZFCmZHbXVPcStKSG4xQXA0K1RBMEthTkFsODMrdjV6UXluQmJUM1JicUZQTDFZRHJ6N0FNQ2tsdTFPN3FTNEhldXAKc1NVRWtKZlJlK0VXVGo2NmpRVGo2UDNzQ1BmSythbUNodVlWb2g3YXBtQ0hkV040SndsM1diTXd6ME90aURHVwp4RVBkRUlyQU9mMmpxYlRUL0JLcnhuWlZiRWdRcXluRFkrM3dOQmlZa1VBRVIyWTBoRjhlckxsdFoyTG5kekNnCi9uMXRUSDZWR2FwNjdEV1BwZThBSzhvT2Rwb2JwUlZ0bTMrc2xWOFZOU1VNVXhYLzg3aytnU2JWSS9HL0pseGQKam00WDA3MTZNR3owWWxGcVFQdDRUM3hlSDViQU5CT2NPRnJPbUdkQldVVjcvUiticVZSa0JLbE5nL2xRR0ZFSApDUmZIVkp6TWk5RDVRNUlldW5FQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZGTUdQdWFydFhFcVN3dzdqc0x2eFVTcUN1ejRNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFBNTh5R0pTRkNRVUk4Z051dm1pcmw5RmhsdG1pemNjNHFkWGo1TG1zUVZuOHhOdW85UQp4b2hnbGtpckFCdnlmWUZnaXIvR2VwOC9hYlFXZEdQcEFndVNrQUM1Rzcrc1l4UkQ0ZkhEYVV2WGY3Um5RT2Q5CmlpVUJ5dmRtVXF3Zm1zWnJIcFVQOXVHaURMUDdVWS9iSTQ5bVRjTDJjVnRqOXhlbWh3UStSYUNvZHZQaXlOM0kKK2NES1JKY21ab0M2ZElyckVFbitBdFdzeFA5NjNQanM3a2F0djBWYmNYeEd6U1dJNGduaG16OFIxam13V3BFSwp3MGNxN1F0d1lFWW9vRjREZjRBZ1gyME41aFRvZTl1NmRKdis5S0hCZkJjUFBpSkx2dGdjTDZuY0R4dXVtMjJCCmVva09aR0JyWlgxU3NBTVFsUmd3bjB6clNVT3J6WWNWUWtYQgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://8.16.0.98:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    namespace: "322488871377965056"
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFekNDQWZ1Z0F3SUJBZ0lJZUorT2V0OGYyaEV3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBMU1UWXdNekU0TkRKYUZ3MHlNekExTVRZd016RTRORGRhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXNqRGZPWGhRMHZiLzlhN2UKb0x2dTZ0cklmdFdNL0RZci9uQlFtSWN4S1hxWUlLdXBPZFo1Vks4d2g3dUVrazlRNWdjay9kZmIzVU9NTTd3MQpWOFdQMjk1Q29ia2IyenpTWHNZNEZFZjdSNXNPODNjUEZDd1M0L1UxQkZmMklwOVBmY0dVTjZjc2dhdy80M2J2CmJwNk5FU3hEMzlyRitGK1czQTgzVGQzQlk5UWVYSlV3K2IwN0ZZZTYyc0MwNXg4aC9xVW1UTzNObW1DZklUVkIKS01qcWxZK0c1TmE1dk40R2thelZGbEE4K1ZtRFFBL0N0RUYySWlVY1lZc29FVktSTVVLcXBzclROb3Z6WFErMQo4Ry81UkZSRTB6Mmh5N2xCVEJhaVFwbWhFVWs5OFlIWlZIMmRoQ3Noa255REt6cENkRFJBRmgrcjUvUXY0TEZsCkhCdlg5UUlEQVFBQm8wZ3dSakFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0h3WURWUjBqQkJnd0ZvQVVVd1krNXF1MWNTcExERHVPd3UvRlJLb0s3UGd3RFFZSktvWklodmNOQVFFTApCUUFEZ2dFQkFKZ1VQK291QWJTN0RSbFdILzRpclhDQS9LK2xUNEVXSU5tczdqS093anNjeGdKbGZhMU5DK1JYCnZuZ2JMVHJwaW5QU3dJckt6YmVkMWZubHp5WXBKVGxKa01tZWNPK0EzSndWODJLWU9RUDFOL2FMMmhUNzFtM3MKMWpNQ08zRVh4d3I1a1JCaWhnc2V1RXE4MXJMckhyQ2Y5bUdxMGNIc0Z4SW0valR4bmpaU0Nsa0xjT09lYi9IcgpTQllIbXRhSlFrdFlQSGdhWkFyQkZjVU11VWhjSXZxOC9TSllWSjk0TkhTQXV1a3J2T0lQRkxFRGEwSVp2dzJDClJsVFFkMy9yeTQ2RTZHeFl4WEROSDMyZ2EvQVh3ZnNUMTZHWVFWVDN6YzJoTW5aSklWK3d6TkJtZCt1KzFGZGIKK1lLRld1T09BdlpVNDVLNnZleXVsYmg1eXJBUHUwYz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBc2pEZk9YaFEwdmIvOWE3ZW9MdnU2dHJJZnRXTS9EWXIvbkJRbUljeEtYcVlJS3VwCk9kWjVWSzh3aDd1RWtrOVE1Z2NrL2RmYjNVT01NN3cxVjhXUDI5NUNvYmtiMnp6U1hzWTRGRWY3UjVzTzgzY1AKRkN3UzQvVTFCRmYySXA5UGZjR1VONmNzZ2F3LzQzYnZicDZORVN4RDM5ckYrRitXM0E4M1RkM0JZOVFlWEpVdworYjA3RlllNjJzQzA1eDhoL3FVbVRPM05tbUNmSVRWQktNanFsWStHNU5hNXZONEdrYXpWRmxBOCtWbURRQS9DCnRFRjJJaVVjWVlzb0VWS1JNVUtxcHNyVE5vdnpYUSsxOEcvNVJGUkUwejJoeTdsQlRCYWlRcG1oRVVrOThZSFoKVkgyZGhDc2hrbnlES3pwQ2REUkFGaCtyNS9RdjRMRmxIQnZYOVFJREFRQUJBb0lCQUVjeFQzNWVtNnd1RTBYTgpnQlVvQU9URVZLYVlHNlFJNExyZmxOUGI3OEJxd3EwSzZLbTdEdTdPcjgwTEZvUitQQXdyZnBRTTBrTXM0YThwCjJ3WWVZTU92b1YrTDNaMVNSNXFtQjNIUzhJcERZVTNVbTZtcmtrQ1JqNFVVdjdwRmZEVDZTb1dSdlM1eDYzU3QKNkN1Q0hVcG5MUmNiQ1UyYW8yTjRrTmdEYVdqQWcrUkJlS3FpZ2RHaC90eld6dGJSaUFBWXlOZzZjOHloZFVNUwp3QkRJcEpXTGwyRFFCUkt1UDZKYmczd0xnL0VsN0t4YmVnbEVSdHp3UERWYUgrc0VKWXNyVURCL2hUQmo5VWtTCkwwOVh1MnFuK1RacUh4aVBBQXQzVXI4Njh3OWpqY0xSM1VYZDVtemFuS3R5bUpLenowdExneUJFcm1FYStoek4KWUVMWWxtRUNnWUVBNVpOc2tONzFxOVk1c050Q0xDZ25LN3RYM1RxVXdOQ1lFMFZ3NjAxc1p1bHNHRDFoTzE0MApRRmRMc1E5cUZVdk9pbzY0Sy8zYS9pT2FyVkk3VXN0bTVnKzdsQUpGNzdnRmhuVGV4MzNCUS9KaU9kOUtRcmVNCm9jTHNDZ1JjZU5RMm9aNVppQ2ZRYzZSSlRPTUNXVlY2akdOemRpV3N3RGtXVStJT1dtN1FCbXNDZ1lFQXhyTmMKdjBYRVl5dmV1N2NxNHJlYzJpcmtFM3ZvSlROU3ZDYkdrcXlVMnZxV1NIRWEzTC91V014Z25VUCt5d1pnclpWVwo1b1k4WXkxU2s1d3gwekJ6SWZLQy9RZGk5elNabkdtNHRjNE1PaTlyVVVqY1BtL0lsRk9zU3piOHcyVktBK1g0CjF0a0laanJxUTJFd3dmMnNtMmNUWm1selV5OGdpNzlkaVdKYmN4OENnWUE5M2MycStMcWh0UmhVNWJGZWJ1K24KWkZRWVJSb2pIOU5ybGhJSkJ4TklaRzBCMTBDbG5BeGVybWV5Ym1IN0hUT3F1UzAraGFtSFJSY0EwQ0UyZmFQYwpLYTgyQXFyUUgvbzFNcmQ2Y1JRcytGdXFGdGRQUldGN2tpakR4a3NaTUs4TVBMMEo2UmpPb1I0enZ4VTU5OFFQCm94bFJaSE82VldnRDhPNUhSb2Qrd3dLQmdRREdEZ29vYlRZdlU0OFR0S04ra0Y0NzUveW1ueDdwMVpwbUNKQnQKcXJCRkJQbS9BMTR2SXZCRWVwTGlydC9OSm5JL0UxZ25OeTRCL1M4T0N1WnZCeC83ZW1xdUl5cTJGU3Y0Q0RrZwpubHo1c2tKYUp6SEEybE1uNWE4YTJaaGdleG1uZ1JianNEajdEVVpzR3ZncXBOdmptbjV2MmpRbGVoZ0tzNWhjClZEbXJLUUtCZ1FDc2Y1Y3NqcW5HZGwvOFpXNHdtaUppUlpzMG1IOXFEbFI3cjVtNzh1MldwZVBiUmlET0VuZngKTlkwYnd6eHdLOEd5eVdIZjl0WkFZaVlLOXJ4cjQvMkVPNlBUbTBxekRMQTJwaDFhdTdsMllKOGlEQUhiS1JobQo3Nnora0d6NGtTOElEVkFydkcwSm96d1lJK3dOV1JpZE16eVAveDArQk1tLzFSRnBQeGt0WWc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
`
