package k8s

import (
	"k8s.io/client-go/rest"
	"k8s.io/client-go/rest/fake"
	"k8s.io/client-go/tools/clientcmd"

	"net/http"
)

func NewFakeClient(roundTripper func(*http.Request) (*http.Response, error), fns ...ReqTransformFn) (Interface, error) {
	return newClient(newFakeRestConfig(), fake.CreateHTTPClient(roundTripper), fns...)
}

func newFakeRestConfig() *rest.Config {
	clientConfig, _ := clientcmd.NewClientConfigFromBytes([]byte(kubeConfig))
	restConfig, _ := clientConfig.ClientConfig()
	return restConfig
}

const kubeConfig = `
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1EWXlOakV5TlRnMU5Wb1hEVE15TURZeU16RXlOVGcxTlZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT2dqClU1YmRPcmRlNUZOUGI3TjErTlZXZzViMnZoa3EvSmsxSmtyaGtybjh0RUsweG1iRFhmYURaNHdwalZ1ZmtSVFQKaGlvVjk3MzlaQ2pic1ZpV21RL0Z2d0VXSHdLN0ZMYmo0TEd3VS9YN3BKK2ZHVXYrT1MwQVBYWHRna1Y2RFh4agpLM1VpS2hRL3JNcWR2RmFDamVLU0Z4L2ladUx4N1EwNXFsVkp2UDhTWEx3MnZza3EybGx2YVdEcmVab0tJY2hUCi9rVmswZFhRc0FEdkxmTHJXd0paamNJbXBtVU1OOHZxWjVEZ0dJb1NvcVZtTVBnU0NLTnlNK1ZrVklVOVFVT2cKekMrdGFzeFZSajNUUjN4UG5sTktCcFNuYUNPbkx0ZEw5SDg3TUFHY240QXNHcnBab3IyWm9BVmhkVHNhRjJ0NApnRzJScmFFYTZOdWx3SzhQWlE4Q0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZKTnMzRnVDdm1mRHptMFVPYjJVNk5LdG9DUzlNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFDeEVZNFcxWVVWb0dHRVZxNkQyNURaYTg3eG5SN1I2K1M4MHFOWENzcHVBRFdPZm12Zwp4WEd0a0kvRkVwUEhFOTlwMGNzMFVpMDlqTzg3VkdZdUlDZ1RmaXFRYkQwRTRqYS96RmwrRU56QXN0dXJXamd2Cmh4emoyUjhKeDlhaCt2R0F5MExVOEZsUTIzeWxXOFZEdmxUZXBCVVBvVTRBcjV5RkVTcllaeUVtaTFYWjc1VE4KZ294cldDQkJBQ2Y0eUtIRTBreWhySlN3YU9qVkMrSERlZXIveVFXL0RHbjM2U3pJYW1CdVEwNlZqYXl4VGJmNApHTDJjWWRINENzYXd6c0lCS3BPK1Rna3QwNlZsMm4zeUFlR28wYkg1d2xYMS9VWWdvQ2toL09iSEJoa2NWaUl2CkZBNXhrdEE4S2ZpU2M4SDZOUnRjaWRlQkdOd2hEd1doUXBUaAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://120.55.54.50:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFekNDQWZ1Z0F3SUJBZ0lJTXVMOVlZNHQ0Snd3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TWpBMk1qWXhNalU0TlRWYUZ3MHlNekEyTWpZeE1qVTROVGRhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXY1UThrRXM5WmdCNE9QRloKNXZ3NHZUQ3BhY1lTRWpGZXNRbzA3ZmlrbFV5eWZYWnBKQ21TbWh6Zk5vVEZJMnFaWGhOdDB6QlVXL0RQd1BwUwo5aFBBU3p3blBkVVVKSTlNSGI0TmRheGtVdmZGYTg5eWRoRXJVd3IyOG0rUmdWZEJpODZkdGJyOFpmc1lDOFJOCjdGNG9mMVJJcThRU0hBVmhWZ3l3elJySG5ZSkFTWGJLUzRraWxmWlBjbGFkSjVacXlacE5yWlk2Y0VKaFBPMFEKWG1FMU1IUEFwVzRDTCtZbndNblFaVWJVR0x1QXhXWGg3WnEvQUE0ODdlZnFNKzZ2RUUvUHhuUkVOMDBzZ1NKVApJWW9ZSU1NN0EyL05hdEhMN1hJSHErTkx5amdSN0xKNUtXOXJSVUJGNWd1anorRGZkZXY1RnpVZkNVUk5VRjBCClQ0OXFvd0lEQVFBQm8wZ3dSakFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0h3WURWUjBqQkJnd0ZvQVVrMnpjVzRLK1o4UE9iUlE1dlpUbzBxMmdKTDB3RFFZSktvWklodmNOQVFFTApCUUFEZ2dFQkFNTXBhOEE1WGFncDd6U3NkWFdBM0Zzbk50U3R2ZU9RWXYxZit2dlZraEtaMS84MVBtZWg1bXlpCkVHTG51Wm54MUJ1VUl1ZjlTZkFRV1czVk5RdFZxZi9oNjRqY1M5MmVvQnpZdFF3cHVFUnZtalJTVlZsZU5adTgKbVQzbDVuQm9xSitQSllGSnlSU1JsQWQ0T3owa1JoYSt4akluOUlyWUVQN0RQZ0llMU5RNkZtbjZjYkc0M0QybAp5NkhDOUxrUTFSL2xKVnBqK2hBeDd1Z2ZZMjBxMkUxUzdYNGg5SkpYTkMrSnM4UVNCYmNKWldLVEVHY0VmRkhMCjQ4emNETmMxWHJZWXBRMTNuNDVjMDhQZmdqVFdHNldSK0hISk1NeWYrWks4VW9KSDZZZituN0ViTHpKVnBqWlYKcjh3cVppaTF2ZEFQOG5SdldTUi9veUdaaTZEYVpWZz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBdjVROGtFczlaZ0I0T1BGWjV2dzR2VENwYWNZU0VqRmVzUW8wN2Zpa2xVeXlmWFpwCkpDbVNtaHpmTm9URkkycVpYaE50MHpCVVcvRFB3UHBTOWhQQVN6d25QZFVVSkk5TUhiNE5kYXhrVXZmRmE4OXkKZGhFclV3cjI4bStSZ1ZkQmk4NmR0YnI4WmZzWUM4Uk43RjRvZjFSSXE4UVNIQVZoVmd5d3pSckhuWUpBU1hiSwpTNGtpbGZaUGNsYWRKNVpxeVpwTnJaWTZjRUpoUE8wUVhtRTFNSFBBcFc0Q0wrWW53TW5RWlViVUdMdUF4V1hoCjdacS9BQTQ4N2VmcU0rNnZFRS9QeG5SRU4wMHNnU0pUSVlvWUlNTTdBMi9OYXRITDdYSUhxK05MeWpnUjdMSjUKS1c5clJVQkY1Z3VqeitEZmRldjVGelVmQ1VSTlVGMEJUNDlxb3dJREFRQUJBb0lCQUQ1NzI3RDRTVU0rZmZlYwppRVQxR0pCa0VhMUZBOW5aTGxneHl3ZWVwQmRwMTRGaUlITEIrR1c1YXZmK0g4b29WM00raFFCdmIrUTR5NW5XClN6NmxQSCtOVkFNdnZ3MFppNnJidE1vZmV1MHdrTHhVQWJJT2NZSDVQb2ZkNmFnMHpGVU1BNVlsTVhNVmpVY3gKTkhVV1ZNRUt2VlVBY3lPZWdadXVNZkFEZnYyWTBHVkZSTlRVWUtGN2NDZ0xTUVlRS21PeExBbUJlbHhRMmhwcApMTkZlZ0ZJWE5aUi90UXc1Mnl4d0MyQ0Y1V0l0d1h0QmVkbmRGTDhWZ3lSWjN2NnhkNXdXVTliV0dhNHYrd0xCClQyaThOZENtSDY2eXJTRmU5U3oyUGlFbDRLeExYK2dOUUNnaHhQdzdaK3VKWjQ0V2ZaaWNPMyswaWw3aEo5KzcKYmdubmovRUNnWUVBMjJEMnhtMjljSmwzZ25xSVFzclJGZXZ6RklDMjhOMUdkQXVvR29ML0FiWG1JNFB1aGlQdAptT1oxbkV5dlFNWFpiekxpT1ZoR09LaW9sZjZVVW8vU2E2MVc2NlpOcFNIdXlYMS9RcDVhSEVoZ0JFNkF5Qy95CnAvOGttYm43YWxMcmhrMkJMcVlxSnZkWkpZdFMySC9xVGdocGcvYkdqVmJBQ1p3RkRaSnd6cXNDZ1lFQTM0OUUKTU5OTk9vNm9NalpqK2RhMjRkNCt6WE1WdkJLd0tGRmRCTVgzTVoyQnJWT2ovcVAzbTJtc29RZExhdGVJeVg4NApjYlBTekgrV1pPalN0VHArd1ZhRWJuUVZhclRSUFhWdlV0YWUvUVZKNFJOL0ppUWdnNXpxbU8rd3BaR2xvQUE4CnM4aFhMckxRSkRZblEreEI0WHBzSk0veTJaQmRjNFEwdUR3bDgra0NnWUIxZVVqc0hOdXlyaHQyL1ZKMklkRXcKNGZaNjVpb1FkUTFER3ZMYnI0WUtUbk44VlN1bkhSb2dKRmlhWjkzNDIzbUJ1RWUzMlhOUTU4L084bEpPbThGYgo4NmgxNjhuc1FXMXk3QWIzajRCRllPUTVxaWdBQ3R6djVRcWVYeDhvWWxySXdqd0kxT1lCazdaakNtWkVsTXJOCkdtZ1dTRkV1WW1QWFFYcmJONjI4blFLQmdIdTl2ZjNVaDNPNUVLb3ladVljRGNBNWxzTjdSdldCMXBXS2E1VS8KeWxKaEh5MEVGY3JWa1RFcHJjNjN6ZXZHZjBVZ3NPcG1vWEJsMHFYcUpPOEJBTFlkSUZKTzJLZm1pOGFiNE5HVwpVQXcyeUN6WDhOSDR2eko2UVhRRGYrQTFITnJTSnNkUVJjbG9Xa01nNGx6N1FYLy9saXBPRzlxR3lPTXVzMHVpCnAxTTVBb0dCQUlmam1NZXhoWlUyMnNxbEtOUzd5L3BseWFNVXE1K0taWXlWQktJRkEzL0dURnRMNmF0UzVuVVEKMUZmL2F4cXNFa3IvelFpa2dyTitSM3pmaUordVJlV2crMUNTYlBVWC94QlZ6YWhKb25iam9ZUkxhWFgxNkF1YQozOUFmL2JpUWI5M3ZiVVhXSGxKNGd2a1JmVFcvU0lMK1p2d3J2aTZ5TFFhTFVmMjRETFZZCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==

`